"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[479],{9479:(Y,g,r)=>{r.r(g),r.d(g,{BookingsModule:()=>L});var l=r(6895),a=r(5598),t=r(8256);let b=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-calendar"]],decls:2,vars:0,template:function(e,o){1&e&&(t.TgZ(0,"p"),t._uU(1,"calendar works!"),t.qZA())}}),n})();var d=r(7579),p=r(2722),m=r(5698),u=r(1135),C=r(2076),h=r(8505),y=r(4004),v=r(529);let x=(()=>{class n{constructor(e){this.http=e}getCategories(e=""){return this.http.get(`/api/booking/${e}`)}getStyles(e=""){return this.http.get(`/api/booking/svc/${e}`)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(v.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),f=(()=>{class n{constructor(e){this.a_booking=e,this.selectedSub=new u.X(""),this.categories=[],this.categoriesSub=new u.X(this.categories),this.selected$=this.selectedSub,this.categories$=this.categoriesSub,this.initCategories()}setSelected(e){this.selectedSub.next(e)}getServices(e){this.setSelected(e);let o=!1,s=this.categories.findIndex(c=>c.sku===e&&(c.services&&(o=!0),!0));return o?(0,C.D)([this.categories[s].services]).pipe((0,h.b)(console.log)):this.a_booking.getStyles(e).pipe((0,m.q)(1),(0,h.b)(c=>{this.categories&&(this.categories[s]={...this.categories[s],services:c.results})}),(0,y.U)(c=>c.results))}initCategories(){this.categories.length?this.categoriesSub.next(this.categories):this.a_booking.getCategories().pipe((0,m.q)(1)).subscribe(e=>{this.categories=e.results,this.categoriesSub.next(this.categories)})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(x))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",2),t.NdJ("click",function(){const c=t.CHM(e).$implicit,N=t.oxw();return t.KtG(N.select(c.sku))}),t.TgZ(2,"h2"),t._uU(3),t.ALo(4,"titlecase"),t.qZA()(),t.BQk()}if(2&n){const e=i.$implicit,o=t.oxw();t.xp6(1),t.Tol(e.sku===o.selected?"selected":""),t.uIk("sku",e.sku),t.xp6(2),t.Oqu(t.lcZ(4,5,e.title))}}let k=(()=>{class n{constructor(e,o,s){this.s_booking=e,this.router=o,this.activatedRoute=s,this.selected="",this.categories$=this.s_booking.categories$,this.notifier$=new d.x}ngOnInit(){this.s_booking.selected$.pipe((0,p.R)(this.notifier$)).subscribe(e=>this.selected=e)}ngOnDestroy(){this.stopObs()}stopObs(){this.notifier$.next(null),this.notifier$.complete()}select(e){this.s_booking.getServices(e).pipe((0,m.q)(1)).subscribe(()=>{this.router.navigate([`../${e}`],{relativeTo:this.activatedRoute})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f),t.Y36(a.F0),t.Y36(a.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-categories"]],decls:3,vars:3,consts:[["id","content"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,_,5,7,"ng-container",1),t.ALo(2,"async"),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,o.categories$)))},dependencies:[l.sg,l.Ov,l.rS],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;padding:0 20px;height:100%;overflow-y:auto;--duration: .2s}#content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center;gap:10px;width:100%;padding:10px}button[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center;background-color:#fff;border:1px solid hsl(0deg,0%,70%);border-radius:5px;transition:box-shadow var(--duration),border var(--duration),background-color var(--duration)}button[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{width:100%;text-align:center}button.selected[_ngcontent-%COMP%]{background-color:var(--light-red);border:4px solid var(--red);box-shadow:0 2px 4px #000000a6}"]}),n})(),O=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-confirmation"]],decls:2,vars:0,template:function(e,o){1&e&&(t.TgZ(0,"p"),t._uU(1,"confirmation works!"),t.qZA())}}),n})();function F(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"span",5),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.goBack())}),t._uU(2,"arrow_back_ios"),t.qZA(),t.BQk()}}function Z(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"span",6),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.goBack())}),t._uU(1,"arrow_back_ios"),t.qZA()}}function T(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"span",7),t._uU(2,"arrow_right_alt"),t.qZA(),t.TgZ(3,"a",8)(4,"h4"),t._uU(5),t.ALo(6,"titlecase"),t.qZA()(),t.BQk()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("routerLink",null==e.format.first?null:e.format.first.link),t.xp6(2),t.Oqu(t.lcZ(6,2,null==e.format.first?null:e.format.first.name))}}function M(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"span",7),t._uU(2,"arrow_right_alt"),t.qZA(),t.TgZ(3,"a",8)(4,"h4"),t._uU(5),t.ALo(6,"titlecase"),t.qZA()(),t.BQk()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("routerLink",null==e.format.second?null:e.format.second.link),t.xp6(2),t.Oqu(t.lcZ(6,2,null==e.format.second?null:e.format.second.name))}}let S=(()=>{class n{constructor(e){this.location=e,this.format={back:!0,category:"cat",first:{name:"first",link:"test",active:!0},second:{name:"second",link:"test",active:!0}}}ngOnInit(){}goBack(){this.location.back()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.Ye))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-bread-crumbs"]],inputs:{format:"format"},decls:10,vars:7,consts:[["id","content"],[4,"ngIf","ngIfElse"],["hideBack",""],["id","page"],[4,"ngIf"],[1,"material-symbols-outlined",3,"click"],[1,"material-symbols-outlined","hide",3,"click"],[1,"material-symbols-outlined"],[3,"routerLink"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,F,3,0,"ng-container",1),t.YNc(2,Z,2,0,"ng-template",null,2,t.W1O),t.TgZ(4,"div",3)(5,"h2"),t._uU(6),t.ALo(7,"titlecase"),t.qZA()(),t.YNc(8,T,7,4,"ng-container",4),t.YNc(9,M,7,4,"ng-container",4),t.qZA()),2&e){const s=t.MAs(3);t.xp6(1),t.Q6J("ngIf",o.format.back)("ngIfElse",s),t.xp6(5),t.Oqu(t.lcZ(7,5,o.format.category)),t.xp6(2),t.Q6J("ngIf",null==o.format.first?null:o.format.first.active),t.xp6(1),t.Q6J("ngIf",null==o.format.second?null:o.format.second.active)}},dependencies:[l.O5,a.yS,l.rS],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:100%;padding-left:20px}#content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;height:100%}a[_ngcontent-%COMP%]{color:#666!important}.hide[_ngcontent-%COMP%]{visibility:hidden}"]}),n})(),w=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-nav"]],decls:10,vars:0,consts:[["id","content"],["routerLink","styles","routerLinkActive","active"],["routerLink","calendar","routerLinkActive","active"],["routerLink","confirm","routerLinkActive","active"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"a",1)(2,"h2"),t._uU(3,"Styles"),t.qZA()(),t.TgZ(4,"a",2)(5,"h2"),t._uU(6,"Calendar"),t.qZA()(),t.TgZ(7,"a",3)(8,"h2"),t._uU(9,"Confirm"),t.qZA()()())},dependencies:[a.yS,a.Od],styles:["#content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;width:100%;height:100%;padding:10px;border:1px solid hsl(0deg,0%,80%);border-radius:100px;box-shadow:1px 2px 3px #00000040,1px 2px 5px #00000026}[routerLink][_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;color:#666;text-align:center;line-height:0}[routerLink].active[_ngcontent-%COMP%]{background:var(--light-red);border-radius:100px;color:var(--red)}"]}),n})(),A=(()=>{class n{constructor(e){this.router=e,this.notifier$=new d.x,this.urlArray=[""],this.bCrumbsFormat={back:!1,category:"styles",first:{name:"category",link:"styles/categories",active:!0}},this.crumbFormats=[{back:!1,category:"styles",first:{name:"category",link:"styles/categories",active:!0},second:{name:"style",link:"styles/style",active:!1}},{back:!1,category:"calendar",first:{name:"day",link:"calendar/day",active:!0},second:{name:"time",link:"calendar/time",active:!1}},{back:!1,category:"confirm",first:{name:"review",link:"confirm/review",active:!0},second:{name:"finalize",link:"confirm/finalize",active:!1}}]}ngOnInit(){this.createUrlArray(),this.updateCrumbs(),this.trackNavigation()}ngOnDestroy(){this.stopObs()}updateCrumbs(){switch(this.urlArray[0]){case"styles":this.handleStyles();break;case"calendar":this.handleCalendar();break;case"confirm":this.handleConfirm()}}handleStyles(){"categories"===this.urlArray[1]?this.useCategoryFormat():this.useStyleFormat()}handleCalendar(){"time"===this.urlArray[1]?this.useTimeFormat():this.useDayFormat()}handleConfirm(){"finalize"===this.urlArray[2]?this.useFinalizeFormat():this.useReviewFormat()}useCategoryFormat(){this.bCrumbsFormat={...this.crumbFormats[0]},this.bCrumbsFormat.back=!1,this.bCrumbsFormat.second.active=!1}useStyleFormat(){this.bCrumbsFormat={...this.crumbFormats[0]},this.bCrumbsFormat.back=!0,this.bCrumbsFormat.second.active=!0}useDayFormat(){this.bCrumbsFormat={...this.crumbFormats[1]},this.bCrumbsFormat.back=!1,this.bCrumbsFormat.second.active=!1}useTimeFormat(){this.bCrumbsFormat={...this.crumbFormats[1]},this.bCrumbsFormat.back=!0,this.bCrumbsFormat.second.active=!0}useReviewFormat(){this.bCrumbsFormat={...this.crumbFormats[2]},this.bCrumbsFormat.back=!1,this.bCrumbsFormat.second.active=!1}useFinalizeFormat(){this.bCrumbsFormat={...this.crumbFormats[2]},this.bCrumbsFormat.back=!0,this.bCrumbsFormat.second.active=!0}trackNavigation(){this.router.events.pipe((0,p.R)(this.notifier$)).subscribe(e=>{e instanceof a.m2&&(this.createUrlArray(),this.updateCrumbs())})}createUrlArray(){let e=this.router.url.split("/");this.urlArray=e.slice(2)}stopObs(){this.notifier$.next(null),this.notifier$.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-main"]],decls:7,vars:1,consts:[["id","template"],["id","breadCrumbs"],[3,"format"],["id","content"],["id","nav"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"app-bread-crumbs",2),t.qZA(),t.TgZ(3,"div",3),t._UZ(4,"router-outlet"),t.qZA(),t.TgZ(5,"div",4),t._UZ(6,"app-nav"),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("format",o.bCrumbsFormat))},dependencies:[a.lC,S,w],styles:["[_nghost-%COMP%]{display:block;height:100%;background-color:#fff}#template[_ngcontent-%COMP%]{display:grid;grid-template-rows:50px 1fr 70px;height:100%}#content[_ngcontent-%COMP%]{border:1px solid hsl(0deg,0%,80%);overflow:hidden}#nav[_ngcontent-%COMP%]{padding:10px}"]}),n})(),B=(()=>{class n{constructor(){this.selectedVariants={},this.variantsByType={},this.totalPrice$=new u.X(0),this.totalPrice=this.totalPrice$}set service(e){let o={};e.variants&&e.variants.forEach((s,c)=>{(0==+s.order||0===c)&&(this.selectedVariants={...this.selectedVariants,[s.type]:s}),o={...o,[s.title]:s},this.variantsByType={...this.variantsByType,[s.type]:o}}),console.log("selected: ",this.selectedVariants,"variants: ",this.variantsByType),this.calculatePrice()}calculatePrice(){const e=this.selectedVariants,o=Object.keys(e);console.log(o.reduce((s,c)=>s+e[c].price,0))}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-style-card"]],inputs:{service:["details","service"]},decls:15,vars:0,consts:[["id","style"],["id","card"],["id","left"],["id","title"],["id","description"],["id","details"],["id","time"],["id","price"],["id","right"],["id","image"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"div",3),t.TgZ(4,"div",4)(5,"h4"),t._uU(6,"24in \u2022 Medium \u2022 Hair included Co-Wash"),t.qZA()(),t.TgZ(7,"div",5)(8,"div",6),t._uU(9," (2h 50m) "),t.qZA(),t.TgZ(10,"div",7),t._uU(11," Total: $180 "),t.qZA()()(),t.TgZ(12,"div",8),t._UZ(13,"div",9),t.qZA()(),t._uU(14," hi "),t.qZA())},styles:["#card[_ngcontent-%COMP%], #left[_ngcontent-%COMP%], #details[_ngcontent-%COMP%]{display:flex}#left[_ngcontent-%COMP%]{flex-direction:column}#style[_ngcontent-%COMP%]{height:140px;padding:10px;border:1px solid hsl(0deg,0%,70%);border-radius:5px;box-shadow:1px 2px 4px #00000040;overflow:hidden}#card[_ngcontent-%COMP%]{gap:10px;height:100%}#left[_ngcontent-%COMP%]{flex:1;overflow:hidden}#title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}#description[_ngcontent-%COMP%]{flex:1;display:flex}#description[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{align-self:center;color:#666;font-size:17px;line-height:20px}#details[_ngcontent-%COMP%]{justify-content:space-between;color:#999;font-size:14px}#right[_ngcontent-%COMP%]{flex-shrink:0;width:-moz-fit-content;width:fit-content}#image[_ngcontent-%COMP%]{aspect-ratio:1;height:100%;overflow:hidden;background:hsl(0deg,0%,90%);border-radius:3px;border:1px solid hsl(0deg,0%,50%)}#image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-width:100%;min-height:100%;width:100%;object-fit:cover;transform:translateY(-5%)}"]}),n})();function P(n,i){if(1&n&&(t.ynx(0),t._UZ(1,"app-style-card",4),t.BQk()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("details",e)}}function U(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",2),t.YNc(2,P,2,1,"ng-container",3),t.qZA(),t.BQk()),2&n){const e=i.ngIf;t.xp6(2),t.Q6J("ngForOf",e)}}function $(n,i){1&n&&(t.TgZ(0,"div",5),t._uU(1," No services yet. "),t._UZ(2,"br"),t._uU(3," Check back later! "),t.qZA())}const I=[{path:"",component:A,children:[{path:"",redirectTo:"styles",pathMatch:"full"},{path:"styles",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-services"]],decls:1,vars:0,template:function(e,o){1&e&&t._UZ(0,"router-outlet")},dependencies:[a.lC]}),n})(),children:[{path:"",redirectTo:"categories",pathMatch:"full"},{path:"categories",component:k},{path:":category",component:(()=>{class n{constructor(e,o){this.router=e,this.s_booking=o,this.notifier$=new d.x,this.services=null,this.servicesSub=new u.X(this.services),this.services$=this.servicesSub}ngOnDestroy(){this.stopObs()}ngOnInit(){this.router.params.pipe((0,p.R)(this.notifier$)).subscribe(e=>{this.s_booking.getServices(e.category).pipe((0,p.R)(this.notifier$)).subscribe(o=>{console.log(o),this.services=o,"string"!=typeof this.services&&this.servicesSub.next(this.services),console.log(o)})})}stopObs(){this.notifier$.next(null),this.notifier$.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.gz),t.Y36(f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-styles"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["default",""],["id","content"],[4,"ngFor","ngForOf"],[3,"details"],["id","default"]],template:function(e,o){if(1&e&&(t.YNc(0,U,3,1,"ng-container",0),t.ALo(1,"async"),t.YNc(2,$,4,0,"ng-template",null,1,t.W1O)),2&e){const s=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,o.services$))("ngIfElse",s)}},dependencies:[l.sg,l.O5,B,l.Ov],styles:["[_nghost-%COMP%]{display:block;height:100%;padding:0 10px;overflow:hidden auto}#default[_ngcontent-%COMP%]{text-align:center;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}#content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;padding:10px}"]}),n})()}]},{path:"calendar",component:b},{path:"confirm",component:O}]}];let q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[a.Bz.forChild(I),a.Bz]}),n})(),L=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez,q]}),n})()}}]);